---
id: side-code
sidebar_position: 6
---

import BrowserWindow from "@theme/BrowserWindow";
import SideEditorButton from "@theme/SideEditorButton";

# Side Editor

This theme adds a collapsible code editor pane
which can be populated with the code snippets
from the page.

## Usage

```jsx
import SideEditorButton from "@theme/SideEditorButton";
```

```jsx
<SideEditorButton editorId="devicescript" text={`console.log("hello")`} />
```

<BrowserWindow>
    <SideEditorButton editorId="devicescript" text={`console.log("hello")`} />
</BrowserWindow>

## Configure Monaco editor

You can specify the [monaco editor language](https://microsoft.github.io/monaco-editor/)
to enable the Monaco editor.

```js title="./docusaurus.config.js"
themeConfig: {
    ...
    sideEditor: {
        editors: [
            {
                id: "devicescript",
                // highlight-next-line
                language: "typescript"
            }
        ]
    }
}
```

## Configure IFrame runner

You can configure the theme to load an external iframe.

The plugin communicates with the IFrame using [messages](https://developer.mozilla.org/en-US/docs/Web/API/Window/postMessage)
and you will also need to configure their format.

```mermaid
sequenceDiagram
    Note right of Docs: IFrame loaded
    activate IFrame
    IFrame->>Docs: Ready message
    activate Docs
    Docs->>IFrame: New Source message
    Docs->>IFrame: New Source message
```

```js title="./docusaurus.config.js"
themeConfig: {
    ...
    sideEditor: {
        editors: [
            {
                type: "iframe",
                id: "devicescript",
                // specify different urls for color modes
                lightUrl: "https://...",
                darkUrl: "https://...",
                // docs -> editor message template
                message: {
                    channel: "devicescript",
                    type: "source",
                    force: true,
                    startMissingSimulators: true,
                },
                messageTextFieldName: "source",
                // editor -> docs ready message
                readyMessage: {
                    channel: "jacdac",
                },
            },
        ],
    },
}
```

## Panels position persitence

Provide the `persistenceId` field to serialize the tabs positions accross page reloads.

```js title="./docusaurus.config.js"
themeConfig: {
    ...
    sideEditor: {
        editors: [
            {
                id: "devicescript",
                // highlight-next-line
                persistenceId: "devicescript"
            }
        ]
    }
}
```
